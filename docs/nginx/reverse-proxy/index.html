<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">
  <title>Настройка reverse proxy | wiki</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;

      box-sizing: border-box;
    }

    hr {
      width: 100%;
      height: 1px;
      border: none;
      background-color: #616161;
    }

    h1,h2,h3,h4,h5 {
      margin: 0;
      padding: 0;
      line-height: 143%;
      letter-spacing: 0.15px;
      color: #b5c1ad;
    }

    h1 {
      margin-top: 16px;
      font-size: 22px;
      font-style: normal;
      font-weight: 700;
    }

    h2 {
      margin-top: 10px;
      font-size: 20px;
      font-style: normal;
      font-weight: 700;

    }

    h3 {
      margin-top: 10px;
      font-size: 18px;
      font-style: normal;
      font-weight: 500;
    }

    h4 {
      margin-top: 8px;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
    }

    p {
      margin: 0;
      margin-top: 16px;
      padding: 0;
      color: #ffffff;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      letter-spacing: 0.15px;
    }

    code {
      padding: 3px 6px;
      border-radius: 6px; 
      font-family: 'Ubuntu Mono', monospace;
      font-size: 14px;
      color: #B71C1C;

      background-color: rgba(0, 0, 0, 0.2);
    }

    pre {
      display: block;
        padding-top: 16px;
        padding-bottom: 16px;
        padding-left: 16px;
        padding-right: 16px;

        font-family: 'Ubuntu Mono', monospace;
        font-weight: 400;
        font-style: normal;
        

        border-radius: 4px;

        background-color: rgba(0, 0, 0, 0.2);
    }

    pre code {
      padding: 0;
      background-color: transparent;
      color: #ffffff;
    }

    time {
      font-size: 12px;
      color: #808080;
    }

    .page-body {
      margin: 0;

      display: grid;
      grid-template-rows: min-content 1fr min-content;
      grid-template-columns: 1fr;

      font-family: Roboto, sans-serif;

      font-family: Roboto, Arial, sans-serif;
      background-image: url('https://storage.yandexcloud.net/xdr-bucket/wiki-vulong-development/bg.jpg');
      background-repeat: repeat;
    }

    .container {
      margin: 0 auto;
      padding-left: 15px;
      padding-right: 15px;
      max-width: 1200px;
    }

    .page-main {
      padding-top: 20px;
      padding-bottom: 20px;
      grid-row: 2 / 3;
      width: 100%;

      display: flex;
      flex-direction: column;
      justify-content: start;
      align-items: start;
    }

    li {
      color: #ffffff;

      font-weight: 400;
      font-size: 14px;
      line-height: 143%;
      letter-spacing: 0.15px;
    }

    li:not(:last-of-type) {
      margin-bottom: 16px;
    }

    a {
      display: block;
      margin-bottom: 12px;
      color: #ffffff;
      text-decoration: none;
    }

    a:not(:last-of-type) {
      margin-bottom: 12px;
    }

    a:hover {
      text-decoration: underline;
    }

    
    .page-header {
      padding-left: 20px;
      padding-right: 20px;
      grid-row: 1 / 2;
    }

    .header-title {
      font-weight: 700;
      font-size: 24px;
      line-height: 150%;
      letter-spacing: 0.15px;
      color: #ffffff;
    }

    .header-subtitle {
      font-weight: 500;
      font-size: 16px;
      line-height: 150%;
      letter-spacing: 0.15px;
      color: #c4c4c3;
    }

    .header-nav {
      margin-top: 24px;
      padding-top: 16px;
      padding-bottom: 16px;

      box-shadow: 0 4px 5px -3px #000;
      background-color: #698567;
    }

    .header-nav__list {
      margin: 0;
      list-style: none;
      display: flex;
      align-items: center;
    }

    .header-link {
      margin: 0;
      display: block;
    }


     /*footer*/
    .page-footer {
      padding-top: 16px;
      padding-bottom: 16px;
      grid-row: 3 / 4;
      background-color: rgba(0, 0, 0, 0.2);
    }

    .footer-caption {
      margin: 0;
      padding: 0;
      text-align: center;
      color: #808080;

      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

  </style>  
</head>

<body class="page-body">
  <header class="page-header">
    <div class="container">
      <p class="header-title">Vulong Development</p>
      <span class="header-subtitle">Software &amp; applications</span>
    </div>
    <nav class="header-nav">
      <div class="container">
        <ul class="header-nav__list">
          <li>
            <a class="header-link" href='/'>Главная</a>
          </li>
        </ul>
      </div>
    </nav>
  </header> 



  <main class="page-main container"> 
    <p>Вот пример конфигурации для nginx.conf, которую можно использовать в контейнере Docker для настройки Nginx в качестве обратного прокси для других контейнеров:</p>
<pre><code class="language-nginx">http {
    server {
        listen 80;

        location /service1/ {
            proxy_pass http://service1_container:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        location /service2/ {
            proxy_pass http://service2_container:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}

</code></pre>
<p>Здесь service1_container и service2_container - это имена контейнеров Docker для соответствующих сервисов, которые должны быть связаны с Nginx через Docker networking. Замените 8080 на порт, который слушает ваш сервис.</p>
<p>Чтобы использовать этот файл конфигурации в контейнере Docker, создайте Dockerfile:</p>
<pre><code class="language-Docker">FROM nginx:latest

COPY nginx.conf /etc/nginx/nginx.conf

</code></pre>
<p>Создайте образ и запустите контейнер Nginx:</p>
<pre><code class="language-Bash">docker build -t my-nginx .
docker run -d --name my-nginx-proxy --link service1_container --link service2_container -p 80:80 my-nginx
</code></pre>
<p>Здесь --link используется для устаревшего сетевого режима Docker. Если вы используете пользовательские сети Docker, используйте --net для подключения к той же сети, что и ваши сервисы, и убедитесь, что вы используете имена сервисов, определенные в вашей сети Docker.</p>

  </main> 

  <footer class="page-footer">
    <p class="footer-caption">wiki.vulong-development</p>
  </footer>
</body>
</html>